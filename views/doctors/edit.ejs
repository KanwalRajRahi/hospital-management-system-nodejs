<div class="card">
    <div class="card-header bg-warning">
        <h4><i class="fas fa-edit"></i> Edit Doctor: Dr. <%= doctor.name %></h4>
    </div>
    <div class="card-body">
        <form action="/doctors/<%= doctor._id %>?_method=PUT" method="POST">
            <div class="mb-3">
                <label for="name" class="form-label">Name</label>
                <input type="text" class="form-control" id="name" name="name" value="<%= doctor.name %>" required>
            </div>
            <div class="mb-3">
                <label for="specialization" class="form-label">Specialization</label>
                <input type="text" class="form-control" id="specialization" name="specialization" value="<%= doctor.specialization %>" required>
            </div>
            <div class="mb-3">
                <label for="qualification" class="form-label">Qualification</label>
                <input type="text" class="form-control" id="qualification" name="qualification" value="<%= doctor.qualification %>" required>
            </div>
            <div class="mb-3">
                <label for="experience" class="form-label">Experience (years)</label>
                <input type="number" class="form-control" id="experience" name="experience" value="<%= doctor.experience %>" min="0" required>
            </div>
            <div class="mb-3">
                <label for="email" class="form-label">Email</label>
                <input type="email" class="form-control" id="email" name="contactDetails[email]" value="<%= doctor.contactDetails.email %>" required>
            </div>
            <div class="mb-3">
                <label for="phone" class="form-label">Phone</label>
                <input type="tel" class="form-control" id="phone" name="contactDetails[phone]" value="<%= doctor.contactDetails.phone %>" required>
            </div>
            <div class="mb-3">
                <label for="address" class="form-label">Address</label>
                <textarea class="form-control" id="address" name="contactDetails[address]" rows="3" required><%= doctor.contactDetails.address %></textarea>
            </div>
            
            <!-- Doctor Availability Section -->
            <h5 class="mt-4 mb-3">Availability</h5>
            <% doctor.availability.forEach((slot, index) => { %>
                <div class="card mb-3">
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="day<%= index %>" class="form-label">Day</label>
                                    <select class="form-select" id="day<%= index %>" name="availability[<%= index %>][day]" required>
                                        <option value="">Select Day</option>
                                        <option value="Monday" <%= slot.day === 'Monday' ? 'selected' : '' %>>Monday</option>
                                        <option value="Tuesday" <%= slot.day === 'Tuesday' ? 'selected' : '' %>>Tuesday</option>
                                        <option value="Wednesday" <%= slot.day === 'Wednesday' ? 'selected' : '' %>>Wednesday</option>
                                        <option value="Thursday" <%= slot.day === 'Thursday' ? 'selected' : '' %>>Thursday</option>
                                        <option value="Friday" <%= slot.day === 'Friday' ? 'selected' : '' %>>Friday</option>
                                        <option value="Saturday" <%= slot.day === 'Saturday' ? 'selected' : '' %>>Saturday</option>
                                        <option value="Sunday" <%= slot.day === 'Sunday' ? 'selected' : '' %>>Sunday</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="startTime<%= index %>" class="form-label">Start Time</label>
                                    <input type="time" class="form-control" id="startTime<%= index %>" name="availability[<%= index %>][startTime]" value="<%= slot.startTime %>" required>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="endTime<%= index %>" class="form-label">End Time</label>
                                    <input type="time" class="form-control" id="endTime<%= index %>" name="availability[<%= index %>][endTime]" value="<%= slot.endTime %>" required>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            <% }); %>
            
            <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                <a href="/doctors/<%= doctor._id %>" class="btn btn-secondary me-md-2">Cancel</a>
                <button type="submit" class="btn btn-primary">Update Doctor</button>
            </div>
        </form>
    </div>
</div>